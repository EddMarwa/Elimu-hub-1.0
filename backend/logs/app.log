2025-07-20 22:23:52,877 - elimu_hub - INFO - startup_event:68 - Starting Elimu Hub API...
2025-07-20 22:23:52,879 - elimu_hub - INFO - startup_event:69 - Environment: PRODUCTION
2025-07-20 22:23:52,880 - elimu_hub - INFO - startup_event:70 - Log level: INFO
2025-07-20 22:23:52,899 - elimu_hub - INFO - log_requests:32 - Request: GET http://localhost:8000/openapi.json
2025-07-20 22:23:52,949 - elimu_hub - INFO - log_requests:39 - Response: 200 - 0.050s
2025-07-20 22:24:50,956 - elimu_hub - INFO - log_requests:32 - Request: GET http://localhost:8000/redoc
2025-07-20 22:24:50,961 - elimu_hub - INFO - log_requests:39 - Response: 200 - 0.005s
2025-07-20 22:24:52,025 - elimu_hub - INFO - log_requests:32 - Request: GET http://localhost:8000/openapi.json
2025-07-20 22:24:52,027 - elimu_hub - INFO - log_requests:39 - Response: 200 - 0.003s
2025-07-20 22:26:26,704 - elimu_hub - INFO - shutdown_event:74 - Shutting down Elimu Hub API...
2025-07-20 22:27:55,783 - elimu_hub - INFO - startup_event:68 - Starting Elimu Hub API...
2025-07-20 22:27:55,864 - elimu_hub - INFO - startup_event:69 - Environment: PRODUCTION
2025-07-20 22:27:55,948 - elimu_hub - INFO - startup_event:70 - Log level: INFO
2025-07-20 22:27:56,031 - elimu_hub - INFO - shutdown_event:74 - Shutting down Elimu Hub API...
2025-07-20 22:29:22,264 - elimu_hub - INFO - startup_event:68 - Starting Elimu Hub API...
2025-07-20 22:29:22,265 - elimu_hub - INFO - startup_event:69 - Environment: PRODUCTION
2025-07-20 22:29:22,265 - elimu_hub - INFO - startup_event:70 - Log level: INFO
2025-07-20 22:29:22,266 - elimu_hub - INFO - shutdown_event:74 - Shutting down Elimu Hub API...
2025-07-20 22:30:34,704 - elimu_hub - INFO - startup_event:76 - Starting Elimu Hub API...
2025-07-20 22:30:34,705 - elimu_hub - INFO - startup_event:77 - Environment: PRODUCTION
2025-07-20 22:30:34,705 - elimu_hub - INFO - startup_event:78 - Log level: INFO
2025-07-20 22:30:34,706 - elimu_hub - INFO - shutdown_event:82 - Shutting down Elimu Hub API...
2025-07-21 14:22:26,500 - elimu_hub - INFO - run_migrations:18 - Starting database migration...
2025-07-21 14:22:26,505 - elimu_hub - INFO - run_migrations:23 - Database migration completed successfully
2025-07-21 14:22:26,513 - elimu_hub - INFO - run_migrations:30 - Available tables: documents, topics
2025-07-21 14:22:26,513 - elimu_hub - ERROR - run_migrations:37 - Missing tables: users, chat_sessions, chat_messages
2025-07-21 14:24:36,846 - elimu_hub - ERROR - create_admin_user:52 - Error creating admin user: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.hashed_password AS users_hashed_password, users.is_active AS users_is_active, users.is_admin AS users_is_admin, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = ? OR users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('edd@elimuhub.com', 'Edlimu', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-21 14:25:15,967 - elimu_hub - INFO - main:118 - Starting complete database setup...
2025-07-21 14:25:15,969 - elimu_hub - ERROR - create_all_tables:38 - Error creating tables: cannot import name 'Document' from 'app.models.document' (C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\models\document.py)
2025-07-21 14:25:15,970 - elimu_hub - ERROR - main:126 - Failed to create tables
2025-07-21 14:28:58,497 - elimu_hub - ERROR - create_admin_user:52 - Error creating admin user: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.hashed_password AS users_hashed_password, users.is_active AS users_is_active, users.is_admin AS users_is_admin, users.created_at AS users_created_at, users.last_login AS users_last_login 
FROM users 
WHERE users.email = ? OR users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('edd@elimuhub.com', 'EddAdmin', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-21 14:35:06,297 - elimu_hub - INFO - create_admin_user:47 - Admin user created successfully: edd@gmail.com
2025-07-21 14:39:40,803 - elimu_hub - INFO - create_admin_user:47 - Admin user created successfully: admin@elimuhub.com
2025-07-21 14:40:23,467 - root - INFO - start.py:71 - Starting Elimu Hub Backend...
2025-07-21 14:40:23,468 - root - INFO - start.py:72 - Environment: development
2025-07-21 14:40:23,468 - root - INFO - start.py:73 - Debug mode: True
2025-07-21 14:40:23,468 - root - INFO - start.py:74 - Host: 0.0.0.0:8000
2025-07-21 14:40:23,469 - root - INFO - start.py:20 - Checking dependencies...
2025-07-21 14:40:23,510 - root - INFO - start.py:38 - Setting up database...
2025-07-21 14:40:24,964 - root - INFO - start.py:55 - Running database migrations...
2025-07-21 14:40:26,443 - elimu_hub - INFO - run_migrations:18 - Starting database migration...
2025-07-21 14:40:26,445 - elimu_hub - INFO - run_migrations:23 - Database migration completed successfully
2025-07-21 14:40:26,446 - elimu_hub - INFO - run_migrations:30 - Available tables: documents, topics, users
2025-07-21 14:40:26,447 - elimu_hub - ERROR - run_migrations:37 - Missing tables: chat_sessions, chat_messages
2025-07-21 14:40:26,650 - root - INFO - start.py:100 - Starting FastAPI server...
2025-07-22 16:19:47,921 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:19:47,922 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:19:47,922 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:19:47,922 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:19:47,923 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:19:47,924 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:19:47,926 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:19:47,927 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:19:47,927 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:19:47,928 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:19:47,971 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:19:47,971 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:22:17,262 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:22:17,263 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:22:17,264 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:22:17,264 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:22:17,269 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:22:17,272 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:22:17,273 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:22:17,274 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:22:17,275 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:22:17,275 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:22:17,278 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:22:17,279 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:22:53,727 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/health
2025-07-22 16:22:54,756 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.029s
2025-07-22 16:22:54,757 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:23:10,915 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:23:10,942 - elimu_hub - INFO - login:70 - Login attempt for email: admin@elimuhub.com
2025-07-22 16:23:10,944 - elimu_hub - ERROR - authenticate_user:72 - Authentication error: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:23:10,945 - elimu_hub - WARNING - login:74 - Failed login attempt for email: admin@elimuhub.com
2025-07-22 16:23:10,946 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.031s
2025-07-22 16:23:10,947 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:29:02,947 - elimu_hub - ERROR - create_admin_user:27 - User with email admin@elimuhub.com already exists
2025-07-22 16:29:20,426 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:29:20,431 - elimu_hub - INFO - login:70 - Login attempt for email: admin@elimuhub.com
2025-07-22 16:29:20,431 - elimu_hub - ERROR - authenticate_user:72 - Authentication error: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:29:20,432 - elimu_hub - WARNING - login:74 - Failed login attempt for email: admin@elimuhub.com
2025-07-22 16:29:20,433 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.007s
2025-07-22 16:29:20,434 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:29:30,560 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 16:29:30,673 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.114s
2025-07-22 16:29:30,677 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:29:44,758 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/register
2025-07-22 16:29:44,766 - elimu_hub - INFO - register:16 - Registration attempt for email: test@elimuhub.com
2025-07-22 16:29:44,767 - elimu_hub - ERROR - global_exception_handler:73 - Unhandled exception: '_GeneratorContextManager' object has no attribute 'query'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 183, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Users\Edd\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\main.py", line 68, in rate_limit
    |     return await rate_limit_middleware(request, call_next)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\middleware\rate_limit.py", line 77, in rate_limit_middleware
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Users\Edd\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\main.py", line 39, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    |     raise app_exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\fastapi\routing.py", line 302, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\fastapi\routing.py", line 213, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\auth.py", line 19, in register
    |     existing_user = db.query(User).filter(
    |                     ^^^^^^^^
    | AttributeError: '_GeneratorContextManager' object has no attribute 'query'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\main.py", line 68, in rate_limit
    return await rate_limit_middleware(request, call_next)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\middleware\rate_limit.py", line 77, in rate_limit_middleware
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\AppData\Local\Programs\Python\Python313\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_utils.py", line 83, in collapse_excgroups
    raise exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\main.py", line 39, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    raise app_exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\fastapi\routing.py", line 302, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\fastapi\routing.py", line 213, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\auth.py", line 19, in register
    existing_user = db.query(User).filter(
                    ^^^^^^^^
AttributeError: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:29:55,537 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/llm/models
2025-07-22 16:29:55,539 - elimu_hub - INFO - log_requests:43 - Response: 403 - 0.002s
2025-07-22 16:29:55,539 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:30:52,294 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 16:30:52,295 - elimu_hub - INFO - stop:60 - Stopping job queue workers
mu Hub API...
2025-07-22 16:30:52,295 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 16:30:52,595 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:30:52,707 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:30:52,707 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:30:52,707 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:30:52,707 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:30:52,707 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:30:52,717 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:30:53,069 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:30:53,069 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:30:53,072 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:31:16,209 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:31:16,211 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:31:16,212 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:31:16,212 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:31:16,218 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:31:16,217 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:31:16,220 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:31:16,223 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:31:16,223 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:31:16,223 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:31:16,225 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:31:16,225 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:31:16,226 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:31:16,227 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:31:16,227 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:31:16,228 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:31:16,229 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:31:16,230 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:31:16,230 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:31:16,231 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:31:16,231 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:31:16,233 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:31:16,234 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:33:56,566 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:33:56,566 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:33:56,567 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:33:56,567 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:33:56,569 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:33:56,574 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:33:56,578 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:33:56,579 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:33:56,579 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:33:56,580 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:33:56,583 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:33:56,584 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:34:13,599 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/health
2025-07-22 16:34:14,621 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.022s
2025-07-22 16:34:14,622 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:36,221 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:35:36,236 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.014s
2025-07-22 16:35:36,236 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:36,242 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:35:36,247 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.005s
2025-07-22 16:35:36,248 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:39,762 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:35:39,764 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 16:35:39,764 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:39,770 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:35:41,259 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.490s
2025-07-22 16:35:41,260 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:58,165 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/completions
2025-07-22 16:35:58,166 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 16:35:58,167 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:35:58,171 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/completions
2025-07-22 16:35:58,178 - elimu_hub - INFO - log_requests:43 - Response: 403 - 0.007s
2025-07-22 16:35:58,181 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:04,225 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 16:36:04,227 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 16:36:04,229 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:04,254 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:36:04,275 - elimu_hub - INFO - log_requests:43 - Response: 403 - 0.022s
2025-07-22 16:36:04,283 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:11,423 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:36:12,617 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.194s
2025-07-22 16:36:12,617 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:43,729 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 16:36:43,735 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.006s
2025-07-22 16:36:43,737 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:44,060 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:36:44,083 - elimu_hub - INFO - login:70 - Login attempt for email: admin@elimuhub.com
2025-07-22 16:36:44,083 - elimu_hub - ERROR - authenticate_user:72 - Authentication error: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:36:44,084 - elimu_hub - WARNING - login:74 - Failed login attempt for email: admin@elimuhub.com
2025-07-22 16:36:44,085 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.024s
2025-07-22 16:36:44,085 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:45,705 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:36:45,755 - elimu_hub - INFO - login:70 - Login attempt for email: admin@elimuhub.com
2025-07-22 16:36:45,756 - elimu_hub - ERROR - authenticate_user:72 - Authentication error: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:36:45,757 - elimu_hub - WARNING - login:74 - Failed login attempt for email: admin@elimuhub.com
2025-07-22 16:36:45,758 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.053s
2025-07-22 16:36:45,759 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:36:46,663 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:36:46,668 - elimu_hub - INFO - login:70 - Login attempt for email: admin@elimuhub.com
2025-07-22 16:36:46,669 - elimu_hub - ERROR - authenticate_user:72 - Authentication error: '_GeneratorContextManager' object has no attribute 'query'
2025-07-22 16:36:46,669 - elimu_hub - WARNING - login:74 - Failed login attempt for email: admin@elimuhub.com
2025-07-22 16:36:46,670 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.007s
2025-07-22 16:36:46,671 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:37:39,833 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 16:37:39,834 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 16:37:40,523 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:37:40,558 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:37:40,610 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:37:40,645 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:37:40,652 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:38:04,414 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:38:04,415 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:38:04,418 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:38:04,419 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:38:04,423 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:38:04,425 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:38:04,426 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:38:04,428 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:38:04,428 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:38:04,429 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:38:04,432 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:38:04,432 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:39:03,468 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:39:03,469 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:39:03,470 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:39:03,472 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:39:03,477 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:39:03,479 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:39:03,480 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:39:03,482 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:39:03,482 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:39:03,483 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:39:03,486 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:39:03,487 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:39:51,344 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:39:51,368 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:39:51,996 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:39:52,001 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.657s
2025-07-22 16:39:52,002 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:40:03,000 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:40:03,004 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:40:03,663 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:40:03,671 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.671s
2025-07-22 16:40:03,677 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:40:03,701 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:40:03,715 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: Hello, can you help me with mathematics?...
2025-07-22 16:40:03,729 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:40:03,947 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.245s
2025-07-22 16:40:03,947 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:41:22,885 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:41:22,891 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:41:23,452 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:41:23,454 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.569s
2025-07-22 16:41:23,455 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:42:01,825 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:42:01,832 - elimu_hub - WARNING - verify_token:46 - JWT token verification failed: Signature verification failed.
2025-07-22 16:42:01,833 - elimu_hub - ERROR - get_current_user:41 - Error getting current user: 401: Could not validate credentials
2025-07-22 16:42:01,834 - elimu_hub - INFO - log_requests:43 - Response: 401 - 0.009s
2025-07-22 16:42:01,835 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:42:14,780 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:42:14,785 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:42:15,387 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:42:15,389 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.609s
2025-07-22 16:42:15,390 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:42:15,400 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:42:15,406 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 16:42:15,409 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:42:15,423 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.023s
2025-07-22 16:42:15,424 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:21,999 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:43:22,003 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:43:22,619 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:43:22,622 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.623s
2025-07-22 16:43:22,622 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:22,632 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/me
2025-07-22 16:43:22,635 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 16:43:22,637 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:22,643 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/auth/me
2025-07-22 16:43:22,658 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.015s
2025-07-22 16:43:22,659 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:28,154 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:43:28,162 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.007s
2025-07-22 16:43:28,164 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:28,193 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:43:28,209 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.018s
2025-07-22 16:43:28,211 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:31,830 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:43:33,104 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.273s
2025-07-22 16:43:33,105 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:45,106 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 16:43:45,108 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 16:43:45,111 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:43:45,129 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:43:45,145 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: 2+2...
2025-07-22 16:43:45,164 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:43:45,199 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.070s
2025-07-22 16:43:45,200 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:44:46,189 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 16:44:46,190 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 16:44:46,204 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:44:46,228 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:44:46,357 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:44:46,636 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:44:46,638 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:45:07,234 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:45:07,238 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: help...
2025-07-22 16:45:07,242 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:45:07,253 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.019s
2025-07-22 16:45:07,256 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:45:10,687 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:45:10,689 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:45:10,690 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:45:10,691 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:45:10,693 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:45:10,695 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:45:10,696 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:45:10,698 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:45:10,698 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:45:10,699 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:45:10,702 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:45:10,703 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:46:00,387 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 16:46:00,387 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 16:46:01,127 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:46:01,127 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:46:01,142 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:46:01,142 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:46:01,144 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:46:24,326 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:46:24,327 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:46:24,327 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:46:24,329 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:46:24,333 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:46:24,334 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:46:24,335 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:46:24,337 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:46:24,337 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:46:24,337 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:46:24,340 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:46:24,341 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:47:10,820 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 16:47:10,820 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 16:47:11,791 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 16:47:11,792 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 16:47:11,792 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 16:47:11,792 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 16:47:11,797 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 16:47:26,124 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:47:26,127 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:47:26,662 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:47:26,664 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.540s
2025-07-22 16:47:26,665 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:47:26,668 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:47:26,672 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 16:47:26,676 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:47:26,710 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.042s
2025-07-22 16:47:26,711 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:47:34,709 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 16:47:34,709 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 16:47:34,710 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 16:47:34,713 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 16:47:34,717 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 16:47:34,722 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 16:47:34,724 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 16:47:34,726 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 16:47:34,727 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 16:47:34,740 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 16:47:34,746 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 16:47:34,747 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 16:49:56,146 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:49:56,150 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:49:56,791 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:49:56,793 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.647s
2025-07-22 16:49:56,795 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:49:56,799 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:49:56,806 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 16:49:56,810 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:49:56,821 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.021s
2025-07-22 16:49:56,822 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:52:09,877 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:52:09,880 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:52:10,486 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:52:10,489 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.612s
2025-07-22 16:52:10,490 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:52:10,496 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:52:10,502 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 16:52:10,506 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:52:10,518 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.022s
2025-07-22 16:52:10,519 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:53:02,930 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:53:02,935 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: hello...
2025-07-22 16:53:02,937 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    db.commit()
    ~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:53:02,984 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.053s
2025-07-22 16:53:02,984 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:53:12,788 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:53:12,795 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.007s
2025-07-22 16:53:12,796 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:53:12,820 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 16:53:12,825 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.005s
2025-07-22 16:53:12,826 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:53:15,767 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:53:15,768 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 16:53:15,768 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:53:15,772 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:53:17,196 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.424s
2025-07-22 16:53:17,197 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:55:19,582 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:55:19,587 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:55:20,148 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:55:20,151 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.568s
2025-07-22 16:55:20,151 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:55:20,161 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 16:55:20,166 - elimu_hub - INFO - chat:69 - User test@elimuhub.com chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 16:55:20,170 - elimu_hub - ERROR - chat:217 - Error processing chat request for user test@elimuhub.com: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
Traceback (most recent call last):
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\backend\app\api\chat.py", line 100, in chat
    session = None
        ^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 76, in save_obj
    for table, mapper in base_mapper._sorted_tables.items():
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4060, in _sorted_tables
    sorted_ = sql_util.sort_tables(
        table_to_mapper,
        skip_fn=skip,
        extra_dependencies=extra_dependencies,
    )
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1316, in sort_tables
    for (t, fkcs) in sort_tables_and_constraints(
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tables,
        ^^^^^^^
    ...<2 lines>...
        _warn_for_cycles=True,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1386, in sort_tables_and_constraints
    filtered = filter_fn(fkc)
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 1306, in _skip_fn
    if fixed_skip_fn(fk):
       ~~~~~~~~~~~~~^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4043, in skip
    dep = table_to_mapper.get(fk.column.table)
                              ^^^^^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1226, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3199, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Edd\Documents\Github\Elimu-hub-1.0\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 3222, in _resolve_column
    raise exc.NoReferencedTableError(
    ...<5 lines>...
    )
sqlalchemy.exc.NoReferencedTableError: Foreign key associated with column 'chat_sessions.user_id' could not find table 'users' with which to generate a foreign key to target column 'id'
2025-07-22 16:55:20,182 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.021s
2025-07-22 16:55:20,182 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:56:00,742 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm
2025-07-22 16:56:00,744 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 16:56:00,744 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:56:42,742 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/health
2025-07-22 16:56:43,759 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.017s
2025-07-22 16:56:43,759 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:58:09,222 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 16:58:09,226 - elimu_hub - INFO - login:70 - Login attempt for email: test@elimuhub.com
2025-07-22 16:58:09,844 - elimu_hub - INFO - login:88 - User logged in successfully: test@elimuhub.com
2025-07-22 16:58:09,846 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.624s
2025-07-22 16:58:09,846 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 16:58:09,855 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 16:58:11,307 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.453s
2025-07-22 16:58:11,308 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:05:07,346 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 17:05:07,347 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 17:05:07,347 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 17:05:07,351 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:05:07,355 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:05:07,357 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:05:07,358 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:05:07,360 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:05:07,360 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 17:05:07,361 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:05:07,365 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:05:07,366 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 17:05:16,340 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/chat
2025-07-22 17:05:16,343 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.003s
2025-07-22 17:05:16,343 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:05:45,574 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 17:05:45,577 - elimu_hub - INFO - log_requests:43 - Response: 403 - 0.003s
2025-07-22 17:05:45,578 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:06:25,264 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/chat/debug
2025-07-22 17:06:25,266 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:06:25,267 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:06:44,699 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm
2025-07-22 17:06:44,701 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 17:06:44,702 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:06:53,835 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/?id=c4cc2239-33e8-49cd-9387-925d7b38238c&vscodeBrowserReqId=1753193213457
2025-07-22 17:06:53,836 - elimu_hub - INFO - root:98 - Root endpoint accessed
2025-07-22 17:06:53,837 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 17:06:53,838 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:06:59,369 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs?id=c4cc2239-33e8-49cd-9387-925d7b38238c&vscodeBrowserReqId=1753193219359
2025-07-22 17:06:59,371 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 17:06:59,372 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:07:00,293 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 17:07:00,369 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.076s
2025-07-22 17:07:00,371 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:07:07,612 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm?id=c4cc2239-33e8-49cd-9387-925d7b38238c&vscodeBrowserReqId=1753193227292
2025-07-22 17:07:07,614 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:07:07,615 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:08:13,271 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:08:13,275 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 17:08:13,276 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:08:13,281 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:08:13,286 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.005s
2025-07-22 17:08:13,287 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:08:13,291 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:08:13,295 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 17:08:13,305 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:08:15,412 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:08:15,432 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.020s
2025-07-22 17:08:15,434 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:08:51,588 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 17:08:51,590 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.001s
2025-07-22 17:08:51,590 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:09:10,614 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 17:09:10,615 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:09:11,312 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:09:11,329 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:09:11,329 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:09:11,383 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:09:11,385 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 17:09:33,999 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 17:09:34,001 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 17:09:34,003 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 17:09:34,003 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:09:34,007 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:09:34,009 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:09:34,010 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:09:34,011 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:09:34,012 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 17:09:34,012 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:09:34,016 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:09:34,017 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 17:09:45,415 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 17:09:45,417 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.002s
2025-07-22 17:09:45,418 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:12:25,594 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 17:12:25,595 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 17:12:25,596 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 17:12:25,596 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:12:25,601 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:12:25,602 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:12:25,603 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:12:25,604 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:12:25,604 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 17:12:25,605 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:12:25,608 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:12:25,609 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 17:12:45,899 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 17:12:45,900 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:12:46,803 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:12:46,803 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:12:46,804 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:12:46,804 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:12:46,807 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 17:13:10,607 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 17:13:10,608 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 17:13:10,608 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 17:13:10,609 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:13:10,615 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:13:10,617 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:13:10,619 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:13:10,621 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:13:10,621 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 17:13:10,622 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:13:10,625 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:13:10,626 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 17:13:10,628 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 17:13:10,629 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:13:11,623 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:13:11,624 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:13:11,624 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:13:11,624 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:13:11,633 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 17:13:35,598 - elimu_hub - INFO - startup_event:108 - Starting Elimu Hub API...
2025-07-22 17:13:35,599 - elimu_hub - INFO - startup_event:109 - Environment: DEBUG
2025-07-22 17:13:35,602 - elimu_hub - INFO - startup_event:110 - Log level: INFO
2025-07-22 17:13:35,603 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:13:35,606 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:13:35,608 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:13:35,610 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:13:35,613 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:13:35,613 - elimu_hub - INFO - startup_event:114 - Job queue started
2025-07-22 17:13:35,614 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:13:35,617 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:13:35,618 - elimu_hub - INFO - startup_event:118 - FTS5 for documents is ready
2025-07-22 17:13:35,621 - elimu_hub - INFO - shutdown_event:122 - Shutting down Elimu Hub API...
2025-07-22 17:13:35,621 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:13:36,617 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:13:36,618 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:13:36,618 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:13:36,618 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:13:36,621 - elimu_hub - INFO - shutdown_event:126 - Job queue stopped
2025-07-22 17:14:00,200 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:14:00,202 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:14:00,207 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:14:00,214 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:14:00,218 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:14:00,220 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:14:00,221 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:14:00,222 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:14:00,223 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:14:00,223 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:14:00,226 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:14:00,227 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:14:01,104 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 17:14:01,106 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:14:01,228 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:14:01,231 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:14:01,231 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:14:01,231 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:14:01,234 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 17:14:47,250 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:14:47,250 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:14:47,251 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:14:47,251 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:14:47,253 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:14:47,254 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:14:47,256 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:14:47,257 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:14:47,257 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:14:47,258 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:14:47,260 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:14:47,261 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:14:47,263 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 17:14:47,264 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:14:48,267 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:14:48,268 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:14:48,268 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:14:48,268 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:14:48,278 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 17:15:11,014 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:15:11,014 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:15:11,015 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:15:11,015 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:15:11,017 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:15:11,018 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:15:11,019 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:15:11,020 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:15:11,020 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:15:11,021 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:15:11,024 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:15:11,025 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:15:15,100 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:15:15,100 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:15:15,101 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:15:15,101 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:15:15,102 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:15:15,103 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:15:15,104 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:15:15,105 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:15:15,105 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:15:15,106 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:15:15,108 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:15:15,109 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:15:22,298 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm
2025-07-22 17:15:28,192 - elimu_hub - INFO - log_requests:43 - Response: 200 - 5.894s
2025-07-22 17:15:28,204 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:16:12,288 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 17:16:12,292 - elimu_hub - INFO - chat:80 - Chat request - Topic: Technology, Question: What is artificial intelligence?...
2025-07-22 17:16:12,294 - elimu_hub - INFO - chat:94 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 17:16:12,297 - elimu_hub - INFO - chat:97 - Calling LLM service directly for response
2025-07-22 17:16:38,425 - elimu_hub - INFO - chat:100 - LLM response received: Absolutely, I'd be happy to help explain what artificial intelligence (AI) is!

### What is Artifici...
2025-07-22 17:16:38,426 - elimu_hub - INFO - chat:111 - Chat response generated successfully in 26.134s
2025-07-22 17:16:38,428 - elimu_hub - INFO - log_requests:43 - Response: 200 - 26.140s
2025-07-22 17:16:38,428 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:17:19,188 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs?id=b9c42346-c363-4fd9-932a-43eb30e54558&vscodeBrowserReqId=1753193838865
2025-07-22 17:17:19,189 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 17:17:19,189 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:17:19,343 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 17:17:19,392 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.049s
2025-07-22 17:17:19,392 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:17:30,628 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:17:30,647 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.019s
2025-07-22 17:17:30,647 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:17:46,934 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:17:46,938 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 17:17:46,939 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:18:31,937 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 17:18:31,937 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 17:18:31,938 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:18:31,939 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 17:18:32,095 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:18:32,095 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:18:32,095 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 17:18:32,095 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:18:32,096 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 17:18:32,096 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 17:18:32,101 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 17:18:32,175 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 17:18:32,177 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 17:18:55,093 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:18:55,093 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:18:55,094 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:18:55,094 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:18:55,094 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 17:18:55,095 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 17:18:55,095 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 17:18:55,095 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:18:55,095 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 17:18:55,096 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:18:55,097 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 17:18:55,097 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:18:55,099 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 17:18:55,099 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:18:55,099 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:18:55,100 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:18:55,101 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 17:18:55,104 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 17:18:55,104 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 17:18:55,104 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:18:55,105 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:18:55,105 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 17:18:55,108 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 17:18:55,108 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 17:18:58,055 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/me
2025-07-22 17:18:58,058 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 17:18:58,059 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:18:58,067 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/auth/me
2025-07-22 17:18:58,070 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:18:58,071 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:01,349 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:19:01,375 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.026s
2025-07-22 17:19:01,382 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:01,427 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:19:01,431 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 17:19:01,431 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:04,861 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:19:04,863 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 17:19:04,864 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:04,868 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:19:08,765 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.897s
2025-07-22 17:19:08,766 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:20,215 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:19:31,256 - elimu_hub - INFO - log_requests:43 - Response: 200 - 11.041s
2025-07-22 17:19:31,257 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:19:51,074 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:20:06,671 - elimu_hub - INFO - log_requests:43 - Response: 200 - 15.596s
2025-07-22 17:20:06,673 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:20:41,748 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:20:58,294 - elimu_hub - INFO - log_requests:43 - Response: 200 - 16.546s
2025-07-22 17:20:58,295 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:22:36,381 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:22:43,873 - elimu_hub - INFO - log_requests:43 - Response: 200 - 7.493s
2025-07-22 17:22:43,874 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:23:15,233 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:23:21,392 - elimu_hub - INFO - log_requests:43 - Response: 200 - 6.160s
2025-07-22 17:23:21,393 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:11,213 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:11,214 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 17:24:11,215 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:11,220 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:11,223 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:24:11,226 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:12,578 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:12,596 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.018s
2025-07-22 17:24:12,598 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:17,227 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:17,229 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:24:17,230 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:18,124 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:18,128 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.005s
2025-07-22 17:24:18,132 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:18,779 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:18,781 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:24:18,782 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:19,219 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:19,225 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.006s
2025-07-22 17:24:19,230 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:19,544 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 17:24:19,546 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 17:24:19,547 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:42,441 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:24:42,452 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.010s
2025-07-22 17:24:42,456 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:24:42,474 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 17:24:42,487 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.014s
2025-07-22 17:24:42,489 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:25:01,118 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:25:04,765 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.647s
2025-07-22 17:25:04,766 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 17:25:23,465 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 17:25:28,070 - elimu_hub - INFO - log_requests:43 - Response: 200 - 4.605s
2025-07-22 17:25:28,071 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:00:03,573 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 18:00:03,575 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 18:00:03,576 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:00:03,826 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 18:00:07,567 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.741s
2025-07-22 18:00:07,575 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:01:39,921 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 18:01:48,528 - elimu_hub - INFO - log_requests:43 - Response: 200 - 8.607s
2025-07-22 18:01:48,529 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:04:20,774 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:04:20,774 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:04:20,774 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:04:20,774 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:04:20,775 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:04:20,775 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:04:20,776 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:04:20,777 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:04:20,777 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:04:20,777 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:04:20,779 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:04:20,779 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:04:27,052 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 18:04:30,964 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.912s
2025-07-22 18:04:30,965 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:04:31,731 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:04:31,731 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:04:31,839 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:04:31,870 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:04:31,871 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:04:31,871 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:04:31,873 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:04:42,598 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:04:42,598 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:04:42,599 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:04:42,599 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:04:42,600 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:04:42,602 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:04:42,603 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:04:42,604 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:04:42,605 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:04:42,605 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:04:42,607 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:04:42,607 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:04:47,707 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 18:04:50,459 - elimu_hub - INFO - log_requests:43 - Response: 200 - 2.752s
2025-07-22 18:04:50,459 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:04:52,346 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:04:52,346 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:04:52,672 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:04:52,672 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:04:52,672 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:04:52,687 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:04:52,689 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:05:03,655 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:05:03,655 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:05:03,656 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:05:03,656 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:05:03,657 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:05:03,657 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:05:03,658 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:05:03,659 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:05:03,659 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:05:03,659 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:05:03,660 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:05:03,660 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:05:03,662 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:05:03,663 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:05:04,662 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:05:04,662 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:05:04,663 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:05:04,663 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:05:04,664 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:05:15,676 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:05:15,677 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:05:15,677 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:05:15,677 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:05:15,678 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:05:15,679 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:05:15,679 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:05:15,680 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:05:15,680 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:05:15,681 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:05:15,682 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:05:15,682 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:05:35,828 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:05:35,828 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:05:35,842 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:05:36,797 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:05:36,798 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:05:36,798 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:05:36,800 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:05:47,396 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:05:47,396 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:05:47,396 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:05:47,396 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:05:47,397 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:05:47,398 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:05:47,398 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:05:47,399 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:05:47,400 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:05:47,400 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:05:47,401 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:05:47,402 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:05:49,140 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:05:49,140 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:05:49,417 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:05:49,417 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:05:49,417 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:05:49,417 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:05:49,419 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:06:00,045 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:06:00,045 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:06:00,045 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:06:00,046 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:06:00,047 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:06:00,048 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:06:00,048 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:06:00,049 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:06:00,049 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:06:00,050 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:06:00,051 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:06:00,052 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:06:02,192 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:06:02,192 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:06:03,067 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:06:03,068 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:06:03,083 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:06:03,084 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:06:03,085 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:06:13,813 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:06:13,814 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:06:13,814 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:06:13,814 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:06:13,815 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:06:13,816 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:06:13,816 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:06:13,817 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:06:13,817 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:06:13,817 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:06:13,819 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:06:13,819 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:06:27,880 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 18:06:27,888 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.008s
2025-07-22 18:06:27,889 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:06:41,157 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 18:06:41,159 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 18:06:41,160 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:07:02,809 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:07:02,810 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:07:02,810 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:07:02,810 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:07:02,811 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:07:02,811 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:07:02,811 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:07:02,812 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:07:02,812 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:07:02,813 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:07:02,814 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:07:02,814 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:07:11,867 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 18:07:11,869 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 18:07:11,870 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:07:21,639 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics?id=95500e15-4b7c-423a-8f72-71ddf3da6387&vscodeBrowserReqId=1753196841325
2025-07-22 18:07:21,641 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 18:07:21,642 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:07:42,552 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/search-documents?q=test&limit=5
2025-07-22 18:07:42,559 - elimu_hub - INFO - search_documents_api:16 - Searched documents: 'test' (0 results)
2025-07-22 18:07:42,559 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.008s
2025-07-22 18:07:42,560 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:08:37,677 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 18:08:37,679 - elimu_hub - INFO - chat:83 - Chat request - Topic: Science, Question: What is photosynthesis?...
2025-07-22 18:08:37,679 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 18:08:37,680 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Science
2025-07-22 18:22:04,290 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:22:04,291 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:22:04,321 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:22:04,378 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:22:05,238 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:22:05,266 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:22:05,269 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 18:22:17,069 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 18:22:17,069 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 18:22:17,069 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 18:22:17,069 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 18:22:17,070 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 18:22:17,071 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 18:22:17,071 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 18:22:17,072 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 18:22:17,072 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 18:22:17,072 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 18:22:17,074 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 18:22:17,074 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 18:49:25,578 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 18:49:37,589 - elimu_hub - INFO - chat:137 - LLM response received: Of course! I'd be happy to help you understand photosynthesis.

### What is Photosynthesis?

Photosy...
2025-07-22 18:49:37,590 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 2459.911s
2025-07-22 18:49:37,592 - elimu_hub - INFO - log_requests:43 - Response: 200 - 2459.915s
2025-07-22 18:49:37,592 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:49:37,594 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs?id=95500e15-4b7c-423a-8f72-71ddf3da6387&vscodeBrowserReqId=1753198411890
2025-07-22 18:49:37,595 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm?id=95500e15-4b7c-423a-8f72-71ddf3da6387&vscodeBrowserReqId=1753198417776
2025-07-22 18:49:37,595 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 18:49:41,579 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.984s
2025-07-22 18:49:41,579 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:49:41,580 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.985s
2025-07-22 18:49:41,580 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:49:41,582 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: What is 2+2?...
2025-07-22 18:49:41,582 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 18:49:41,582 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 18:49:49,558 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 18:49:58,819 - elimu_hub - INFO - chat:137 - LLM response received: Absolutely! I'd be happy to help you with that.

The answer to 2 + 2 is 4.

Let's break it down to u...
2025-07-22 18:49:58,820 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 17.238s
2025-07-22 18:49:58,820 - elimu_hub - INFO - log_requests:43 - Response: 200 - 21.226s
2025-07-22 18:49:58,821 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 18:50:03,887 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 18:50:03,887 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 18:50:04,200 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 18:50:04,200 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 18:50:04,201 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 18:50:04,201 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 18:50:04,204 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 20:09:17,310 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 20:09:17,311 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 20:09:17,311 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 20:09:17,313 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 20:09:17,315 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 20:09:17,316 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 20:09:17,317 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 20:09:17,317 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 20:09:17,318 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 20:09:17,318 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 20:09:17,319 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 20:09:17,319 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 20:09:17,328 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-documents
2025-07-22 20:09:17,329 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 20:09:17,331 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 20:09:17,335 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:09:17,337 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.008s
2025-07-22 20:09:17,337 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:09:17,652 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:09:17,653 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:09:17,653 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:09:55,988 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-documents?id=04e80880-7c68-4217-aecd-29c2fdbdefa7&vscodeBrowserReqId=1753204195681
2025-07-22 20:09:55,989 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 20:09:55,990 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:10:12,823 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/search-documents?q=test&limit=5&id=04e80880-7c68-4217-aecd-29c2fdbdefa7&vscodeBrowserReqId=1753204212818
2025-07-22 20:10:12,825 - elimu_hub - INFO - search_documents_api:16 - Searched documents: 'test' (0 results)
2025-07-22 20:10:12,826 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 20:10:12,827 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:29,105 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:29,106 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 20:11:29,107 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:31,024 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:31,025 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:31,025 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:42,416 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:42,417 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:42,417 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:43,248 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:43,249 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:43,249 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:43,476 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:43,477 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:43,477 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:44,028 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:44,029 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:44,029 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:11:44,246 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:11:44,247 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:11:44,247 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:12:04,505 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:12:04,505 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:12:04,506 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:12:21,097 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 20:12:21,100 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 20:12:21,100 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:12:21,103 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 20:12:21,107 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 20:12:21,107 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:12:25,101 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 20:12:25,102 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 20:12:25,102 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:12:25,104 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 20:12:28,506 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.402s
2025-07-22 20:12:28,507 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:13:00,443 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 20:13:08,041 - elimu_hub - INFO - log_requests:43 - Response: 200 - 7.598s
2025-07-22 20:13:08,041 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:13:49,897 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/auth/login
2025-07-22 20:13:49,898 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.001s
2025-07-22 20:13:49,898 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:13:49,901 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/auth/login
2025-07-22 20:13:49,902 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.001s
2025-07-22 20:13:49,902 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 20:21:44,169 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 20:21:44,170 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 20:21:44,191 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 20:21:44,192 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 20:21:44,300 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 20:21:44,535 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 20:21:44,535 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 20:21:44,547 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 20:21:44,733 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 20:21:44,733 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 20:21:44,734 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 20:21:45,127 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 20:21:45,127 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 20:21:45,129 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 20:22:24,846 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 20:22:24,846 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 20:22:24,847 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 20:22:24,847 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 20:22:24,848 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 20:22:24,848 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 20:22:24,848 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 20:22:24,848 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 20:22:24,850 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 20:22:24,850 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 20:22:24,852 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 20:22:24,852 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 20:22:24,853 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 20:22:24,854 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 20:22:24,855 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 20:22:24,855 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 20:22:24,855 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 20:22:24,856 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 20:22:24,856 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 20:22:24,856 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 20:22:24,857 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 20:22:24,857 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 20:22:24,858 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 20:22:24,858 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 20:22:28,188 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 20:22:28,188 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 20:22:28,189 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 20:22:28,189 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 20:22:28,878 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 20:22:28,880 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 20:22:28,880 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 21:24:34,817 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 21:24:34,817 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 21:24:34,818 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 21:24:34,818 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 21:24:34,819 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 21:24:34,819 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 21:24:34,820 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 21:24:34,821 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 21:24:34,821 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 21:24:34,822 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 21:24:34,822 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 21:24:34,824 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 21:24:34,825 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 21:24:34,825 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 21:24:34,825 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 21:24:34,825 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 21:24:34,826 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 21:24:34,826 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 21:24:34,828 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 21:24:34,828 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 21:24:34,828 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 21:24:34,829 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 21:25:01,336 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs?id=98d36405-0bc2-4910-bdb5-0dd17d692317&vscodeBrowserReqId=1753208700975
2025-07-22 21:25:01,337 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 21:25:01,338 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:25:01,541 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 21:25:01,617 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.076s
2025-07-22 21:25:01,621 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:25:13,549 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs
2025-07-22 21:25:13,563 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.014s
2025-07-22 21:25:13,564 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:25:15,127 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 21:25:15,129 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 21:25:15,129 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:25:33,133 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 21:25:33,133 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 21:25:33,134 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 21:25:33,135 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 21:25:33,383 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 21:25:33,383 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 21:25:33,383 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 21:25:33,383 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 21:25:33,430 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 21:25:33,431 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 21:25:33,431 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 21:25:33,431 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 21:25:33,434 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 21:25:33,434 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 21:25:56,090 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 21:25:56,091 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 21:25:56,091 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 21:25:56,092 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 21:25:56,092 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 21:25:56,092 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 21:25:56,093 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 21:25:56,094 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 21:25:56,094 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 21:25:56,095 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 21:25:56,096 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 21:25:56,097 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 21:25:56,097 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 21:25:56,098 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 21:25:56,098 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 21:25:56,098 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 21:25:56,098 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 21:25:56,099 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 21:25:56,099 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 21:25:56,101 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 21:25:56,102 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 21:25:56,102 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 21:25:56,102 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 21:25:56,116 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 21:25:56,121 - elimu_hub - INFO - chat:83 - Chat request - Topic: Technology, Question: What is machine learning?...
2025-07-22 21:25:56,121 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 21:25:56,122 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Technology
2025-07-22 21:26:19,040 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 21:27:01,967 - elimu_hub - INFO - chat:137 - LLM response received: Absolutely! I'd be happy to explain what machine learning is and help you understand its core concep...
2025-07-22 21:27:01,968 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 65.847s
2025-07-22 21:27:01,969 - elimu_hub - INFO - log_requests:43 - Response: 200 - 65.853s
2025-07-22 21:27:01,970 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:27:16,857 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/search-documents?q=artificial%20intelligence&limit=3
2025-07-22 21:27:16,862 - elimu_hub - INFO - search_documents_api:16 - Searched documents: 'artificial intelligence' (0 results)
2025-07-22 21:27:16,863 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.006s
2025-07-22 21:27:16,864 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:27:37,829 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/llm/models
2025-07-22 21:27:37,831 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 21:27:37,831 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:27:48,834 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/search/advanced?query=test&page=1&page_size=5
2025-07-22 21:27:48,846 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.013s
2025-07-22 21:27:48,847 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:28:00,553 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/ingest?id=7523caa1-8a9d-4b0e-a4ec-3176ef132f3f&vscodeBrowserReqId=1753208880222
2025-07-22 21:28:00,571 - elimu_hub - INFO - log_requests:43 - Response: 405 - 0.017s
2025-07-22 21:28:00,571 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:30:01,690 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/docs?id=7523caa1-8a9d-4b0e-a4ec-3176ef132f3f&vscodeBrowserReqId=1753209001371
2025-07-22 21:30:01,691 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 21:30:01,692 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:30:01,866 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/openapi.json
2025-07-22 21:30:01,930 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.065s
2025-07-22 21:30:01,932 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:30:17,144 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm
2025-07-22 21:30:20,058 - elimu_hub - INFO - log_requests:43 - Response: 200 - 2.914s
2025-07-22 21:30:20,059 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:30:39,449 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 21:30:39,452 - elimu_hub - INFO - chat:83 - Chat request - Topic: Science, Question: Tell me about renewable energy...
2025-07-22 21:30:39,453 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 21:30:39,453 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Science
2025-07-22 21:30:48,338 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 21:31:10,169 - elimu_hub - INFO - chat:137 - LLM response received: Certainly! Renewable energy is a fascinating and increasingly important topic. Let's break it down i...
2025-07-22 21:31:10,170 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 30.718s
2025-07-22 21:31:10,171 - elimu_hub - INFO - log_requests:43 - Response: 200 - 30.722s
2025-07-22 21:31:10,172 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:33:42,853 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-documents
2025-07-22 21:33:42,859 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.006s
2025-07-22 21:33:42,859 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:33:52,596 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-documents?id=e45bbb09-9d98-4374-9e5e-9d2940924898&vscodeBrowserReqId=1753209232281
2025-07-22 21:33:52,600 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 21:33:52,601 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:33:59,903 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics?id=e45bbb09-9d98-4374-9e5e-9d2940924898&vscodeBrowserReqId=1753209239892
2025-07-22 21:33:59,911 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.009s
2025-07-22 21:33:59,913 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:36:49,340 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 21:36:49,344 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.004s
2025-07-22 21:36:49,344 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:51:19,733 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 21:51:19,739 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.005s
2025-07-22 21:51:19,740 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:51:19,750 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 21:51:19,759 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.009s
2025-07-22 21:51:19,760 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:51:19,766 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 21:51:19,773 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.007s
2025-07-22 21:51:19,776 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:51:31,098 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 21:51:31,101 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.003s
2025-07-22 21:51:31,102 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 21:51:43,970 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 21:51:43,971 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.001s
2025-07-22 21:51:43,972 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:03:21,079 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 22:03:21,079 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 22:03:21,080 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 22:03:21,080 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 22:03:21,081 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 22:03:21,082 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 22:03:21,083 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 22:03:21,084 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 22:03:21,085 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 22:03:21,085 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 22:03:21,089 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 22:03:21,090 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 22:03:56,013 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/health
2025-07-22 22:03:57,042 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.029s
2025-07-22 22:03:57,042 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:04:19,402 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:04:19,406 - elimu_hub - INFO - chat:83 - Chat request - Topic: General, Question: Hello test...
2025-07-22 22:04:19,407 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:04:19,407 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: General
2025-07-22 22:04:33,695 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:04:45,972 - elimu_hub - INFO - chat:137 - LLM response received: Hello! It looks like you might have just been testing the system, but I'm here to help with any educ...
2025-07-22 22:04:45,972 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 26.566s
2025-07-22 22:04:45,974 - elimu_hub - INFO - log_requests:43 - Response: 200 - 26.571s
2025-07-22 22:04:45,974 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:04:57,968 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 22:05:01,656 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.688s
2025-07-22 22:05:01,657 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:05:12,357 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 22:05:16,250 - elimu_hub - INFO - log_requests:43 - Response: 200 - 3.894s
2025-07-22 22:05:16,251 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:05:45,494 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 22:05:45,495 - elimu_hub - INFO - log_requests:43 - Response: 400 - 0.002s
2025-07-22 22:05:45,496 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:06:31,497 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/
2025-07-22 22:06:31,541 - elimu_hub - INFO - root:96 - Root endpoint accessed
2025-07-22 22:06:31,546 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.049s
2025-07-22 22:06:31,547 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:06:31,779 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/favicon.ico
2025-07-22 22:06:31,780 - elimu_hub - INFO - log_requests:43 - Response: 404 - 0.002s
2025-07-22 22:06:31,781 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:08:07,809 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 22:08:07,809 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 22:08:07,810 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 22:08:07,810 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 22:08:07,811 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 22:08:07,812 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 22:08:07,813 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 22:08:07,815 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 22:08:07,815 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 22:08:07,816 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 22:08:07,818 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 22:08:07,818 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 22:08:49,981 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 22:08:49,984 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.003s
2025-07-22 22:08:49,985 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:08:49,990 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:08:49,994 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: hello...
2025-07-22 22:08:49,995 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:08:49,995 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:09:01,875 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:09:11,091 - elimu_hub - INFO - chat:137 - LLM response received: Hello! It looks like you might have just started your question. How can I assist you today? Whether ...
2025-07-22 22:09:11,091 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 21.098s
2025-07-22 22:09:11,093 - elimu_hub - INFO - log_requests:43 - Response: 200 - 21.103s
2025-07-22 22:09:11,094 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:09:29,906 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:09:29,909 - elimu_hub - INFO - chat:83 - Chat request - Topic: Kiswahili, Question: kitenzi...
2025-07-22 22:09:29,910 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:09:29,911 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Kiswahili
2025-07-22 22:09:38,894 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:09:49,481 - elimu_hub - INFO - chat:137 - LLM response received: Certainly! "Kitenzi" is a Swahili word, and it's great that you're exploring Swahili vocabulary! Let...
2025-07-22 22:09:49,482 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 19.573s
2025-07-22 22:09:49,483 - elimu_hub - INFO - log_requests:43 - Response: 200 - 19.577s
2025-07-22 22:09:49,485 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:10:45,905 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:10:45,908 - elimu_hub - INFO - chat:83 - Chat request - Topic: History, Question: define stone age period...
2025-07-22 22:10:45,909 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:10:45,909 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: History
2025-07-22 22:10:54,783 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:11:04,982 - elimu_hub - INFO - chat:137 - LLM response received: Certainly! The Stone Age is a broad prehistoric period during which stone was widely used to make im...
2025-07-22 22:11:04,983 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 19.075s
2025-07-22 22:11:04,985 - elimu_hub - INFO - log_requests:43 - Response: 200 - 19.079s
2025-07-22 22:11:04,985 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:14:35,704 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 22:14:35,726 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.022s
2025-07-22 22:14:35,727 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:14:35,751 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/list-topics
2025-07-22 22:14:35,758 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.007s
2025-07-22 22:14:35,760 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:14:45,879 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:14:45,882 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: algebra...
2025-07-22 22:14:45,883 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:14:45,883 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:14:55,193 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:15:22,807 - elimu_hub - INFO - chat:137 - LLM response received: Of course! I'd be happy to help you with algebra. Algebra is a branch of mathematics that deals with...
2025-07-22 22:15:22,808 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 36.926s
2025-07-22 22:15:22,809 - elimu_hub - INFO - log_requests:43 - Response: 200 - 36.931s
2025-07-22 22:15:22,810 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:21:08,320 - elimu_hub - INFO - log_requests:36 - Request: OPTIONS http://localhost:8000/api/v1/chat
2025-07-22 22:21:08,322 - elimu_hub - INFO - log_requests:43 - Response: 200 - 0.002s
2025-07-22 22:21:08,322 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:21:08,330 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:21:08,333 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: shorten this response...
2025-07-22 22:21:08,334 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:21:08,335 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:21:18,413 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:21:22,223 - elimu_hub - INFO - chat:137 - LLM response received: Of course! Could you please provide the original response that needs to be shortened? That way, I ca...
2025-07-22 22:21:22,224 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 13.891s
2025-07-22 22:21:22,226 - elimu_hub - INFO - log_requests:43 - Response: 200 - 13.897s
2025-07-22 22:21:22,227 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:21:39,940 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:21:39,950 - elimu_hub - INFO - log_requests:43 - Response: 422 - 0.010s
2025-07-22 22:21:39,951 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:21:50,259 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:21:50,262 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: damn...
2025-07-22 22:21:50,263 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: openrouter, model: qwen/qwen-2.5-72b-instruct
2025-07-22 22:21:50,263 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:22:00,035 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:22:05,165 - elimu_hub - INFO - chat:137 - LLM response received: It looks like you might have sent an incomplete question or a message that doesn't quite fit the edu...
2025-07-22 22:22:05,166 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 14.904s
2025-07-22 22:22:05,168 - elimu_hub - INFO - log_requests:43 - Response: 200 - 14.909s
2025-07-22 22:22:05,168 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:23:43,084 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 22:23:43,084 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 22:23:43,553 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 22:23:43,646 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 22:23:43,649 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 22:23:43,650 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 22:23:43,668 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 22:24:10,864 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 22:24:10,865 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 22:24:10,866 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 22:24:10,866 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 22:24:10,868 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 22:24:10,869 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 22:24:10,871 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 22:24:10,872 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 22:24:10,872 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 22:24:10,873 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 22:24:10,876 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 22:24:10,876 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 22:24:10,880 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 22:24:10,881 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 22:24:11,876 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 22:24:11,877 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 22:24:11,877 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 22:24:11,877 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 22:24:11,881 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 22:24:36,332 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 22:24:36,333 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 22:24:36,333 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 22:24:36,334 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 22:24:36,335 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 22:24:36,336 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 22:24:36,337 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 22:24:36,339 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 22:24:36,339 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 22:24:36,340 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 22:24:36,342 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 22:24:36,343 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 22:24:47,130 - elimu_hub - INFO - log_requests:36 - Request: GET http://localhost:8000/api/v1/test-llm
2025-07-22 22:24:48,405 - elimu_hub - INFO - log_requests:43 - Response: 200 - 1.275s
2025-07-22 22:24:48,406 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:25:02,974 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:25:02,977 - elimu_hub - INFO - chat:83 - Chat request - Topic: Technology, Question: What is artificial intelligence?...
2025-07-22 22:25:02,978 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: groq, model: llama3-8b-8192
2025-07-22 22:25:02,978 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Technology
2025-07-22 22:25:14,147 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:25:15,326 - elimu_hub - INFO - chat:137 - LLM response received: I'm excited to help you learn about artificial intelligence!

Artificial intelligence, or AI, refers...
2025-07-22 22:25:15,327 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 12.349s
2025-07-22 22:25:15,330 - elimu_hub - INFO - log_requests:43 - Response: 200 - 12.356s
2025-07-22 22:25:15,331 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:25:27,153 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 22:25:38,322 - elimu_hub - INFO - log_requests:43 - Response: 200 - 11.169s
2025-07-22 22:25:38,323 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:25:58,711 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/llm/chat/completions
2025-07-22 22:26:12,906 - elimu_hub - INFO - log_requests:43 - Response: 200 - 14.195s
2025-07-22 22:26:12,907 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:26:30,859 - elimu_hub - INFO - shutdown_event:120 - Shutting down Elimu Hub API...
2025-07-22 22:26:30,859 - elimu_hub - INFO - stop:60 - Stopping job queue workers
2025-07-22 22:26:31,389 - elimu_hub - INFO - _worker:83 - Worker 0 stopped
2025-07-22 22:26:31,390 - elimu_hub - INFO - _worker:83 - Worker 1 stopped
2025-07-22 22:26:31,435 - elimu_hub - INFO - _worker:83 - Worker 3 stopped
2025-07-22 22:26:31,451 - elimu_hub - INFO - _worker:83 - Worker 2 stopped
2025-07-22 22:26:31,454 - elimu_hub - INFO - shutdown_event:124 - Job queue stopped
2025-07-22 22:26:57,931 - elimu_hub - INFO - startup_event:106 - Starting Elimu Hub API...
2025-07-22 22:26:57,932 - elimu_hub - INFO - startup_event:107 - Environment: DEBUG
2025-07-22 22:26:57,932 - elimu_hub - INFO - startup_event:108 - Log level: INFO
2025-07-22 22:26:57,933 - elimu_hub - INFO - start:50 - Starting job queue with 4 workers
2025-07-22 22:26:57,934 - elimu_hub - INFO - _worker:70 - Worker 0 started
2025-07-22 22:26:57,936 - elimu_hub - INFO - _worker:70 - Worker 1 started
2025-07-22 22:26:57,938 - elimu_hub - INFO - _worker:70 - Worker 2 started
2025-07-22 22:26:57,940 - elimu_hub - INFO - _worker:70 - Worker 3 started
2025-07-22 22:26:57,941 - elimu_hub - INFO - startup_event:112 - Job queue started
2025-07-22 22:26:57,942 - elimu_hub - INFO - setup_fts:38 - Setting up FTS5 for documents...
2025-07-22 22:26:57,946 - elimu_hub - INFO - setup_fts:43 - FTS5 setup complete.
2025-07-22 22:26:57,947 - elimu_hub - INFO - startup_event:116 - FTS5 for documents is ready
2025-07-22 22:26:57,963 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:26:57,968 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: hello...
2025-07-22 22:26:57,969 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: groq, model: llama3-8b-8192
2025-07-22 22:26:57,969 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:27:09,561 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:27:10,490 - elimu_hub - INFO - chat:137 - LLM response received: Hello there! I'm thrilled to see you're reaching out for help. Don't worry, I'm here to assist you w...
2025-07-22 22:27:10,491 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 12.523s
2025-07-22 22:27:10,493 - elimu_hub - INFO - log_requests:43 - Response: 200 - 12.530s
2025-07-22 22:27:10,493 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
2025-07-22 22:27:46,093 - elimu_hub - INFO - log_requests:36 - Request: POST http://localhost:8000/api/v1/chat
2025-07-22 22:27:46,096 - elimu_hub - INFO - chat:83 - Chat request - Topic: Mathematics, Question: what is todays date...
2025-07-22 22:27:46,097 - elimu_hub - INFO - chat:97 - Initialized LLM service with provider: groq, model: llama3-8b-8192
2025-07-22 22:27:46,098 - elimu_hub - INFO - chat:101 - Searching for relevant context for topic: Mathematics
2025-07-22 22:27:56,948 - elimu_hub - INFO - chat:115 - Found 0 relevant document chunks
2025-07-22 22:27:57,927 - elimu_hub - INFO - chat:137 - LLM response received: I'd be happy to help!

As an educational assistant, I want to encourage you to develop your critical...
2025-07-22 22:27:57,928 - elimu_hub - INFO - chat:148 - Chat response generated successfully in 11.832s
2025-07-22 22:27:57,930 - elimu_hub - INFO - log_requests:43 - Response: 200 - 11.836s
2025-07-22 22:27:57,930 - elimu_hub - ERROR - log_requests:61 - Error logging analytics: module 'app.api.analytics' has no attribute 'log_api_request'
